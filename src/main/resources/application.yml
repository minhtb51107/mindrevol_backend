# ===================================================================
# C·∫§U H√åNH CHO T√çNH NƒÇNG CACHE TH√îNG MINH + CHAT MEMORY
# ===================================================================
application:
  cache:
    l2-distance-threshold: 0.06
    similarity-threshold: 0.95
    redis-ttl-seconds: 3600
    cleanup-interval-days: 90
    l1-cache-max-size: 1000
    l1-cache-expire-minutes: 5

  chat-memory:
    max-messages: 20
    summary-trigger-count: 15
    messages-to-summarize: 10

# ==========================
# Datasource & Hikari Config
# ==========================
spring:
  datasource:
    hikari:
      max-lifetime: 600000
      idle-timeout: 300000
      connection-timeout: 30000
      connection-test-query: "SELECT 1"

  data:
    redis:
      host: localhost
      port: 6379
      repositories:
        enabled: true

  flyway:
    repair: true

# ==========================
# App Config
# ==========================
app:
  default-pipeline-name: "default-rag"

pipelines:
  default-rag:
    steps:
      - retrieval
      - reranking
      - context-compression
      - generation
  simple-rag:
    steps:
      - retrieval
      - generation

retrieval:
  max-results: 15

# ==========================
# API Keys
# ==========================
serper:
  api:
    key: "88167f39e2136998ff9cfdb9ec1c89b781e49934"

weather:
  api:
    key: "4cc89aa50518ec1d08113963d6239d59"

fmp:
  api:
    key: "d3c257pr01qu1259be90d3c257pr01qu1259be9g"

# ==========================
# LangChain Config üß†
# ==========================
langchain:
  chat-model:
    openai:
      api-key: ${OPENAI_API_KEY}    # ‚úÖ Bi·∫øn m√¥i tr∆∞·ªùng
      model-name: gpt-4o
      temperature: 0.7
      log-requests: true
      log-responses: true

  retrieval:
    reranker:
      top-n: 3   # <-- TƒÇNG T·ª™ 2 L√äN 3

# ==========================
# OpenAI Assistant Config ü§ñ
# ==========================
openai:
  assistant:
    id: "asst_SScFL8Whc5N1NGRFqcRqObh5"

# ==========================
# Logging Config üìú
# ==========================
logging:
  level:
    dev.langchain4j.model.openai: DEBUG
